#! /bin/bash
# -*- ENCODING: UTF-8 -*-
# ·
#######################################################
#			lssubdir
#------------------------------------------------------
#	Lista los subdirectorios
#------------------------------------------------------
# autor:	Simón Martínez <simon@cicoss.net>
#------------------------------------------------------
# Uso:
# 	lssubdir [directorio]
#
#	Si no se especifica directorio se tomará el actual
#######################################################

if [ -z "$1" ]; then
	directorio="./"
elif [ ! -d "$1" ]; then
	echo "El directorio $1 no existe"
	exit 1
else
	directorio="$1/"
fi

# Normalizamos el directorio
directorio="$(realpath "$directorio")/"

lectura=$(find "$directorio" -maxdepth 1 -type d ! -path "$directorio")
if [ ${#lectura} -eq 0 ]; then
	#Si no hay subdirectorios
	exit 2
fi

oldIFS=$IFS
IFS=$'\n'

while read -a subdir; do
	if [ -d "$subdir" ]; then
		echo "$subdir"
	fi
done <<< "$lectura"

IFS=$oldIFS
